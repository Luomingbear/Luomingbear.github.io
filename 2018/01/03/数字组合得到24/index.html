<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="缘由 今天同事给我出了一道题：  有四个数字：8、8、3、3，通过加减乘除还有括号，使得结果为24  我一看这么简单的数学题，我弟弟都会，简直就是毫无挑战，于是就拿出笔开始算。“3x8&#x3D;24”这么简单啊，但是还有两个“3、8”啊！，就这样算了一个小时，还是没算出来，内心很受打击。但是，没关系，我是程序员怎么可能解不出来啊，我非得写个算法算出来。于是有了下面的故事… 思路 要求出值为24的排列方式">
<meta property="og:type" content="article">
<meta property="og:title" content="数字组合得到24">
<meta property="og:url" content="https://luomingbear.github.io/2018/01/03/%E6%95%B0%E5%AD%97%E7%BB%84%E5%90%88%E5%BE%97%E5%88%B024/index.html">
<meta property="og:site_name" content="罗啰明天">
<meta property="og:description" content="缘由 今天同事给我出了一道题：  有四个数字：8、8、3、3，通过加减乘除还有括号，使得结果为24  我一看这么简单的数学题，我弟弟都会，简直就是毫无挑战，于是就拿出笔开始算。“3x8&#x3D;24”这么简单啊，但是还有两个“3、8”啊！，就这样算了一个小时，还是没算出来，内心很受打击。但是，没关系，我是程序员怎么可能解不出来啊，我非得写个算法算出来。于是有了下面的故事… 思路 要求出值为24的排列方式">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://file.2fun.xyz/python_computer24.jpg">
<meta property="og:image" content="https://file.2fun.xyz/computer24shuzihefuhao.png">
<meta property="og:image" content="https://file.2fun.xyz/computer24jisaunss.png">
<meta property="article:published_time" content="2018-01-03T02:42:46.000Z">
<meta property="article:modified_time" content="2021-03-18T15:16:54.994Z">
<meta property="article:author" content="Bearever">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://file.2fun.xyz/python_computer24.jpg"><title>数字组合得到24 | 罗啰明天</title><link ref="canonical" href="https://luomingbear.github.io/2018/01/03/%E6%95%B0%E5%AD%97%E7%BB%84%E5%90%88%E5%BE%97%E5%88%B024/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">罗啰明天</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">数字组合得到24</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2018-01-03</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><img width="100%" src="https://file.2fun.xyz/python_computer24.jpg" alt="寻找24的组合" />
<h3>缘由</h3>
今天同事给我出了一道题：

<blockquote>有四个数字：8、8、3、3，通过加减乘除还有括号，使得结果为24</blockquote>

<p>我一看这么简单的数学题，我弟弟都会，简直就是毫无挑战，于是就拿出笔开始算。“3x8=24”这么简单啊，但是还有两个“3、8”啊！，就这样算了一个小时，还是没算出来，内心很受打击。但是，没关系，我是程序员怎么可能解不出来啊，我非得写个算法算出来。于是有了下面的故事…</p>
<h3>思路</h3>
要求出值为24的排列方式，我想到了暴力解法，将每一种可能性算一遍，如果结果刚好是24，那就是我需要的答案了呗。
所以题目就被分解了三个步骤：
<ul>
        <li>遍历获取数字的排列方式</li>
    <li>对于每一种数字的排列方式，获取符号的排列方式</li>
    <li>计算每一种排列情况的值是否等于目标值</li>
</ul>

<h3>遍历数字的排列可能</h3>
<strong>思路：</strong>4个数字有顺序的排列，其实就是一个排列组合问题，共有4*3*2*1 = 24种可能。我的想法是通过循环的方式遍历每一个可能，则对于第一个数字可以有四个数字可以选择，对于第二个数字则有剩余三个数字可以选择，对于第三个数字则有剩余两个数字可选，最后的一个数字则只剩一种可以选择。

<h3>遍历得到符号的排列组合</h3>
思路：对于可以使用的符号有“加减乘除”，另外还有括号，其实括号只是改变了计算的顺序，而我们已经将每一个可能的计算顺序排列了出来，所以只需要一步一步的从左往右计算就可以了。在四个数字之间加入符号一共有四个位置：
<img src="https://file.2fun.xyz/computer24shuzihefuhao.png" alt="符号的位置" />
只需要对每一个位置进行一次循环求得所有的符号排列情况就好，需要注意的是：第一个符号位只能有“加减号”。

<h3>计算</h3>
对于每一个数字和符号的排列进行组合的情况，需要进行计算是否与目标值24相等，如果相等就打印出来。因为我们通过前面的组合得到了一个带有计算符号的字符串，这里我们可以使用<code>eval()</code>函数将值计算出来。
<strong>注意情况：</strong>由于我们的所有操作都是从左到右一步一步的计算，如图：
<img src="https://file.2fun.xyz/computer24jisaunss.png" alt="计算步骤" />
所以会导致无法匹配出<code>8/（1/3）=24</code>的情况，所以，<strong>当我们计算出来值为目标值的倒数的时候，就需要将除数与被除数交换位置，这个时候得到的表达式也是对的</strong>。

<h3>完整代码</h3>
<pre>


        <h1 id="coding-UTF-8"   >
          <a href="#coding-UTF-8" class="heading-link"><i class="fas fa-link"></i></a><a href="#coding-UTF-8" class="headerlink" title="-- coding: UTF-8 --"></a>-<em>- coding: UTF-8 -</em>-</h1>
      <p>from fractions import Fraction</p>

        <h1 id="目标值"   >
          <a href="#目标值" class="heading-link"><i class="fas fa-link"></i></a><a href="#目标值" class="headerlink" title="目标值"></a>目标值</h1>
      <p>targetNum = 24</p>

        <h1 id="已经输出的结果"   >
          <a href="#已经输出的结果" class="heading-link"><i class="fas fa-link"></i></a><a href="#已经输出的结果" class="headerlink" title="已经输出的结果"></a>已经输出的结果</h1>
      <p>printList = []</p>

        <h1 id="获取对应的符号"   >
          <a href="#获取对应的符号" class="heading-link"><i class="fas fa-link"></i></a><a href="#获取对应的符号" class="headerlink" title="获取对应的符号"></a>获取对应的符号</h1>
      
        <h1 id="运算"   >
          <a href="#运算" class="heading-link"><i class="fas fa-link"></i></a><a href="#运算" class="headerlink" title="运算"></a>运算</h1>
      <p>def getNum(num1, num2, fu):<br>    if fu == ‘/‘:<br>        return “Fraction(“ + num1 + “,” + num2 + “)”<br>    else:<br>        return str(num1) + fu + str(num2)</p>

        <h1 id="计算结果-数字有4位，符号有3位"   >
          <a href="#计算结果-数字有4位，符号有3位" class="heading-link"><i class="fas fa-link"></i></a><a href="#计算结果-数字有4位，符号有3位" class="headerlink" title="计算结果 ,数字有4位，符号有3位"></a>计算结果 ,数字有4位，符号有3位</h1>
      <p>def computer(numlist, fulist):<br>    global printList<br>    global targetNum</p>
<pre><code># 前面两个数字计算的结果
v = &quot;0&quot;
# 计算表达式
pp = &quot;&quot;
# 遍历符号
# 从左到右依次计算，不需要按照乘除法先算的规则，因为要考虑括号的情况
for x in range(0, len(fulist)):
    if x == 0:
        v = getNum(&#39;&#39;, numlist[x], fulist[x])
        pp = &quot;&quot; + fulist[x] + numlist[x]
    else:
        v = &quot;(&quot; + getNum(v, numlist[x], fulist[x]) + &quot;)&quot;
        pp = &quot;(&quot; + pp + fulist[x] + numlist[x] + &quot;)&quot;

try:
    # 判断是否已经输出了这个表达式，如果没有会报错
    if printList.index(pp):
        return

except Exception as e:
    # 拦截错误，计算是否匹配结果
    dif = eval(v) - targetNum
    if abs(dif) == 0:
        printList.append(pp)
        print(&#39;----------------------&#39;)
        print(pp, &quot;=&quot;, eval(v))
        print(&#39;----------------------&#39;)
    elif eval(v) == Fraction(1, targetNum):
        v = &quot;&quot;
        pp = &quot;&quot;
        # 除法倒置，将最后的一个除法的除数和被除数交换
        for x in range(0, len(fulist)):
            if x == 0:
                v = getNum(&#39;&#39;, numlist[x], fulist[x])
                pp = &quot;&quot; + fulist[x] + numlist[x]
            else:
                # 如果最后一个符号是“/”，则倒置
                if x == len(fulist) - 1 and fulist[x] == &#39;/&#39;:
                    v = &quot;(&quot; + getNum(numlist[x], v, fulist[x]) + &quot;)&quot;
                    pp = &quot;(&quot; + numlist[x] + fulist[x] + pp + &quot;)&quot;
                else:
                    v = &quot;(&quot; + getNum(v, numlist[x], fulist[x]) + &quot;)&quot;
                    pp = &quot;(&quot; + pp + fulist[x] + numlist[x] + &quot;)&quot;

        # 同样的计算方式，只打印一次
        try:
            printList.index(pp)
        except Exception as e:
            printList.append(pp)
            print(&#39;----------------------&#39;)
            print(pp, &quot;=&quot;, eval(v))
            print(&#39;----------------------&#39;)
</code></pre>

        <h1 id="计算排列组合答案"   >
          <a href="#计算排列组合答案" class="heading-link"><i class="fas fa-link"></i></a><a href="#计算排列组合答案" class="headerlink" title="计算排列组合答案"></a>计算排列组合答案</h1>
      <p>def computer24(numList):<br>    global num</p>
<pre><code># 循环遍历出数字排列组合
for x in range(0, len(numList)):
    # 得到第一个数字
    a = numList[x]
    # 获得剩下的三个数字的列表
    restListA = []
    for x1 in range(0, len(numList)):
        if x1 != x:
            restListA.append(numList[x1])

    for y in range(0, len(restListA)):
        # 第二个数字
        b = restListA[y]
        restListB = []
        for y1 in range(0, len(restListA)):
            if y1 != y:
                restListB.append(restListA[y1])

            #
            for z in range(0, len(restListB)):
                # 第三个数字
                c = restListB[z]
                for z1 in range(0, len(restListB)):
                    if z1 != z:
                        d = restListB[z1]

                        numArray = [a, b, c, d]
                        # 得到了数字组合，需要对数字间隔进行填符号

                        # 第一个符号
                        fulist = [&#39;+&#39;, &#39;-&#39;, &#39;*&#39;, &#39;/&#39;]
                        for q in range(0, 2):
                            # 第二位
                            for w in range(0, 4):
                                # 第三位
                                for e in range(0, 4):
                                    # 第四位
                                    for r in range(0, 4):
                                        f = [fulist[q], fulist[w],
                                             fulist[e], fulist[r]]
                                        # print(numArray, f)
                                        computer(numArray, f)
</code></pre>
<p>computer24([‘8’,’8’,’3’,’3’])<br>print(“计算完成！”)</p>
<p></pre></p>
<h3>运行实例</h3>
<ul>
    <li>计算<code>8、8、3、3</code>组合成<code>24</code></li>
<code>>>>(8/((-8/3)+3)) = 24</code>
    <li>计算<code>1、5、5、5</code>组合为<code>24</code></li>
<code>>>>(((-1/5)+5)*5) = 24</code>
        <li>计算<code>4、4、10、10</code>组合为<code>24</code></li>
<code>>>>(((+10*10)-4)/4)= 24</code>
        <li>计算<code>2、2、11、11</code>组合为<code>24</code></li>
<code>>>>(((+2/11)+2)*11) = 24</code>

</ul>

</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="https://Luomingbear.github.io">Bearever</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="https://luomingbear.github.io/2018/01/03/%E6%95%B0%E5%AD%97%E7%BB%84%E5%90%88%E5%BE%97%E5%88%B024/">https://luomingbear.github.io/2018/01/03/%E6%95%B0%E5%AD%97%E7%BB%84%E5%90%88%E5%BE%97%E5%88%B024/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2018/03/15/%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6Android/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">安装软件Android</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2017/12/28/%E8%93%9D%E7%89%99%E8%BF%9E%E6%8E%A5%E5%BA%93%20IBleLib%E7%9A%84%E4%BD%BF%E7%94%A8/"><span class="paginator-prev__text">蓝牙连接库 IBleLib的使用</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">缘由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">遍历数字的排列可能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">遍历得到符号的排列组合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">5.</span> <span class="toc-text">计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text">完整代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#coding-UTF-8"><span class="toc-number"></span> <span class="toc-text">
          -- coding: UTF-8 --</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E5%80%BC"><span class="toc-number"></span> <span class="toc-text">
          目标值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%B2%E7%BB%8F%E8%BE%93%E5%87%BA%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="toc-number"></span> <span class="toc-text">
          已经输出的结果</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E5%BA%94%E7%9A%84%E7%AC%A6%E5%8F%B7"><span class="toc-number"></span> <span class="toc-text">
          获取对应的符号</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%90%E7%AE%97"><span class="toc-number"></span> <span class="toc-text">
          运算</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C-%E6%95%B0%E5%AD%97%E6%9C%894%E4%BD%8D%EF%BC%8C%E7%AC%A6%E5%8F%B7%E6%9C%893%E4%BD%8D"><span class="toc-number"></span> <span class="toc-text">
          计算结果 ,数字有4位，符号有3位</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88%E7%AD%94%E6%A1%88"><span class="toc-number"></span> <span class="toc-text">
          计算排列组合答案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">运行实例</span></a></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">162</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Bearever</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.4.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>