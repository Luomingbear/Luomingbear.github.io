<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="不只是技术">
<meta property="og:type" content="website">
<meta property="og:title" content="罗啰明天">
<meta property="og:url" content="https://luomingbear.github.io/page/9/index.html">
<meta property="og:site_name" content="罗啰明天">
<meta property="og:description" content="不只是技术">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Bearever">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary"><title>罗啰明天</title><link ref="canonical" href="https://luomingbear.github.io/page/9/index.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">罗啰明天</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content content-home" id="content"><section class="postlist"><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/07/20/%E4%B8%96%E7%95%8C%EF%BC%8C%E6%82%A8%E5%A5%BD%EF%BC%81/">世界，您好！</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2020-07-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><!-- wp:paragraph -->
<p>欢迎使用WordPress。这是您的第一篇文章。编辑或删除它，然后开始写作吧！</p>
<!-- /wp:paragraph --></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/07/20/%E7%A4%BA%E4%BE%8B%E9%A1%B5%E9%9D%A2/">示例页面</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2020-07-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><!-- wp:paragraph -->
<p>这是示范页面。页面和博客文章不同，它的位置是固定的，通常会在站点导航栏显示。很多用户都创建一个“关于”页面，向访客介绍自己。例如：</p>
<!-- /wp:paragraph -->

<!-- wp:quote -->
<blockquote class="wp-block-quote"><p>欢迎！我白天是个邮递员，晚上就是个有抱负的演员。这是我的网站。我住在天朝的帝都，有条叫做Jack的狗。</p></blockquote>
<!-- /wp:quote -->

<!-- wp:paragraph -->
<p>……或这个：</p>
<!-- /wp:paragraph -->

<!-- wp:quote -->
<blockquote class="wp-block-quote"><p>XYZ Doohickey公司成立于1971年，自从建立以来，我们一直向社会贡献着优秀doohickies。我们的公司总部位于天朝魔都，有着超过两千名员工，对魔都政府税收有着巨大贡献。</p></blockquote>
<!-- /wp:quote -->

<!-- wp:paragraph -->
<p>而您，作为一个WordPress用户，我们建议您访问<span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="http://www.bearever.cn/wp-admin/" >控制板</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>，删除本页面，然后添加您自己的页面。祝您使用愉快！</p>
<!-- /wp:paragraph --></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2020/07/20/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/">隐私政策</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2020-07-20</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><!-- wp:heading --><h2>我们是谁</h2><!-- /wp:heading --><!-- wp:paragraph --><p>我们的站点地址是：http://www.bearever.cn。</p><!-- /wp:paragraph --><!-- wp:heading --><h2>我们收集何种及为何收集个人数据</h2><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>评论</h3><!-- /wp:heading --><!-- wp:paragraph --><p>当访客留下评论时，我们会收集评论表单所显示的数据，和访客的IP地址及浏览器的user agent字符串来帮助检查垃圾评论。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>由您的电子邮件地址所生成的匿名化字符串（又称为哈希）可能会被提供给Gravatar服务确认您是否有使用该服务。Gravatar服务的隐私政策在此：https://automattic.com/privacy/。在您的评论获批准后，您的资料图片将在您的评论旁公开展示。</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>媒体</h3><!-- /wp:heading --><!-- wp:paragraph --><p>如果您向此网站上传图片，您应当避免上传那些有嵌入地理位置信息（EXIF GPS）的图片。此网站的访客将可以下载并提取此网站的图片中的位置信息。</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>联系表单</h3><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>Cookies</h3><!-- /wp:heading --><!-- wp:paragraph --><p>如果您在我们的站点上留下评论，您可以选择用cookies保存您的姓名、电子邮件地址和网站。这是通过让您可以不用在评论时再次填写相关内容而向您提供方便。这些cookies会保留一年。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>如果您访问我们的登录页，我们会设置一个临时的cookie来确认您的浏览器是否接受cookies。此cookie不包含个人数据，且会在您关闭浏览器时被丢弃。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>当您登录时，我们也会设置多个cookies来保存您的登录信息及屏幕显示选项。登录cookies会保留两天，而屏幕显示选项cookies会保留一年。如果您选择了“记住我”，您的登录会保留两周。如果您注销，登录cookies将被移除。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>如果您编辑或发布文章，我们会在您的浏览器中保存一个额外的cookie。这个cookie不包含个人数据而只记录了您刚才编辑的文章的ID。这个小甜饼会保留一天。</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>其他站点的嵌入内容</h3><!-- /wp:heading --><!-- wp:paragraph --><p>此站点上的文章可能会包含嵌入的内容（如视频、图像、文章等）。来自其他站点的嵌入内容的行为和您直接访问这些其他站点没有区别。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>这些站点可能会收集关于您的数据、使用cookies、嵌入额外的第三方跟踪程序及监视您与这些嵌入内容的交互，包括在您有这些站点的账户并登录了这些站点时，跟踪您与嵌入内容的交互。</p><!-- /wp:paragraph --><!-- wp:heading {"level":3} --><h3>统计</h3><!-- /wp:heading --><!-- wp:heading --><h2>我们与谁共享您的信息</h2><!-- /wp:heading --><!-- wp:heading --><h2>我们保留多久您的信息</h2><!-- /wp:heading --><!-- wp:paragraph --><p>如果您留下评论，评论和其元数据将被无限期保存。我们这样做以便能识别并自动批准任何后续评论，而不用将这些后续评论加入待审队列。</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>对于本网站的注册用户，我们也会保存用户在个人资料中提供的个人信息。所有用户可以在任何时候查看、编辑或删除他们的个人信息（除了不能变更用户名外）、站点管理员也可以查看及编辑那些信息。</p><!-- /wp:paragraph --><!-- wp:heading --><h2>您对您的信息有什么权利</h2><!-- /wp:heading --><!-- wp:paragraph --><p>如果您有此站点的账户，或曾经留下评论，您可以请求我们提供我们所拥有的您的个人数据的导出文件，这也包括了所有您提供给我们的数据。您也可以要求我们抹除所有关于您的个人数据。这不包括我们因管理、法规或安全需要而必须保留的数据。</p><!-- /wp:paragraph --><!-- wp:heading --><h2>我们将您的信息发送到哪</h2><!-- /wp:heading --><!-- wp:paragraph --><p>访客评论可能会被自动垃圾评论监测服务检查。</p><!-- /wp:paragraph --><!-- wp:heading --><h2>您的联系信息</h2><!-- /wp:heading --><!-- wp:heading --><h2>其他信息</h2><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>我们如何保护您的数据</h3><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>我们有何种数据泄露处理流程</h3><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>我们从哪些第三方接收数据</h3><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>我们通过用户数据进行何种自动决策及/或归纳</h3><!-- /wp:heading --><!-- wp:heading {"level":3} --><h3>行业监管披露要求</h3><!-- /wp:heading --></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/05/11/MacOS%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%E5%A4%B9/">MacOS显示隐藏文件夹</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-05-11</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><h3>在MacOS里面显示隐藏文件的快捷键</h3>

<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">command+shift+.
</code></pre></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/03/29/Jenkins%20Gradle%20%E6%89%93%E5%8C%85%E7%9A%84%E9%97%AE%E9%A2%98/">Jenkins Gradle 打包的问题</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-03-29</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><h3>错误1</h3>

<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">* What went wrong:
Could not determine java version from '10.0.2'.
</code></pre>

<p>解决方案：<br>这个问题的原因是本地有多个Java版本,卸载掉其他版本的java，保留java8就可以了。</p>
<h3>错误2</h3>

<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">* What went wrong:
A problem occurred configuring project ':avchatkit'.
&gt; You have not accepted the license agreements of the following SDK components:
  [Android SDK Platform 26, Android SDK Build-Tools 26.0.2].
  Before building your project, you need to accept the license agreements and complete the installation of the missing components using the Android Studio SDK Manager.
  Alternatively, to learn how to transfer the license agreements from one workstation to another, go to http://d.android.com/r/studio-ui/export-licenses.html
</code></pre>

<p>解决方案：<br>这个问题的原因是sdk没有统一授权，需要到sdk的安装目录里面，找到<code>bin/sdkmanager</code>，执行下面的命令同意授权即可</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">yes | sdkmanager --licenses
</code></pre>

<h3>错误3</h3>

<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">* What went wrong:
A problem occurred configuring project ':avchatkit'.
&gt; Failed to notify project evaluation listener.
   &gt; org.gradle.api.tasks.compile.CompileOptions.setBootClasspath(Ljava/lang/String;)V
</code></pre>

<p>解决方案<br>主要问题是是项目使用的gradle4.2，但是Jenkins使用了gradle5 所以导致了一些兼容问题，可以在jenkins里面设置为使用项目里面的gradle版本。<br><img src="https://file.2fun.xyz/20190329154228.png" alt="" /></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/01/25/SpringBoot%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5/">SpringBoot 数据库连接失败</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-01-25</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>今天在测试springboot的时候遇到一个问题，数据库一直连接不上，服务器报错：</p>
<blockquote>
  Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value 'ÖÐ¹ú±ê×¼Ê±¼ä' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.
</blockquote>

<p>上网查询了一下，原因是我的表里面有一个字段使用了<code>datetime</code>类型，使用<em>mybatis-generator</em>生成的enty文件里面自动转化为了<code>Date</code>类型，需要指定时区才可以使用，所以在jdbc的url地址后面添加<code>serverTimezone=UTC</code>。完整的地址如下：</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">spring.datasource.url=jdbc:mysql://192.168.2.199:3306/jump?characterEncoding=utf-8&amp;&amp;useUnicode=true&amp;&amp;zeroDateTimeBehavior=convertToNull&amp;&amp;serverTimezone=UTC
</code></pre></div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/01/23/Mybatis%E6%8A%A5%E9%94%99%20There%20is%20no%20getter%20for%20property%20named%20xx%20in%20xxx/">Mybatis报错 There is no getter for property named xx in xxx</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-01-23</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>编写接口的时候遇到一个错误</p>
<blockquote>
  Request processing failed; nested exception is org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'record' in 'class java.math.BigDecimal'
</blockquote>

<p>具体的mybatis配置文件如下:</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-xml">&lt;select id="countScore" resultType="int"&gt;
    select count(1) as num from tb_score
    &lt;if test="record != null"&gt;
        where score &lt;= #&#123;record,jdbcType=DECIMAL&#125;
    &lt;/if&gt;
&lt;/select&gt;
</code></pre>

<p>mapper的接口方法如下：</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-java">int countScore(BigDecimal record);
</code></pre>

<p>看了很久一直没有找到原因，最后在网上查到是<code>&lt;if test="record != null"&gt;</code>的问题，这里我只传了一个参数就是record,但是它提示找不到，解决方案是将这句话改为<code>&lt;if test="_parameter != null"&gt;</code></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/01/15/IntelliJ%E7%BB%88%E7%AB%AF%E4%B9%B1%E7%A0%81/">IntelliJ终端乱码</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-01-15</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>使用IntelliJ编写Spring项目，终端输出乱码的解决办法:<br>在VM options里面填写<code>-Dfile.encoding=UTF-8</code><br><img src="https://file.2fun.xyz/intellij_20190115111222.png" alt="" /></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/01/11/%E9%9B%86%E6%88%90360%E5%8A%A0%E5%9B%BA%E5%92%8CWalle%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/">集成360加固和Walle多渠道打包</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-01-11</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><p><span class="exturl"><a class="exturl__link"   target="_blank" rel="noopener" href="https://github.com/Luomingbear/JiaguAndWalle"  title="github链接">github链接</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p>解决360加固导致的渠道信息丢失的问题，同时快速打多渠道包。</p>
<h3>用法：</h3>

<ul>
<li>App添加Walle的依赖<code>compile 'com.meituan.android.walle:library:1.1.6'</code></li>
<li>在config360.py里面添加自己的360账号信息</li>
<li>在sign.json文件里面添加签名信息和buildToolVersion信息</li>
<li>各种渠道的定义是在<code>channel</code>这个文件中，请根据项目情况修改</li>
<li>运行命令<code>python path_of_jiagu_walle.py path_of_apk you_key_name</code> ,这里的可以<em>key_name</em>需要配置在<code>sign.json</code>文件里面</li>
</ul>

<h3>channel</h3>

<p><code>channel</code>文件是存储渠道信息的文件，格式如下：</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-null">360cn #360
baidu # 百度
wandoujia # 豌豆荚
yingyongbao # 应用宝
xiaomi # 小米
meizu # 魅族
vivo # vivo
oppo # oppo
huawei # 华为
samsung # 三星
chuizi # 锤子
</code></pre>

<h3>sign.json</h3>

<p>sign.json存放的是签名信息，字段设计参考</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-json">&#123;
    "myKeyName": &#123;
        "keyStore": "C:\\Users\\Desktop\\out\\xx.jks",
        "alias": "xxxxx",
        "keyPassword": "xxxxx",
        "aliasPassword": "xxx",
        "buildToolVersion": "27.0.0"
    &#125;
&#125;
</code></pre>

<h3>兼容腾讯应用宝市场</h3>

<p>由于腾讯的应用宝市场需要使用自己的乐加固进行加固，导致之前进行的美团渠道信息丢失，所以需要进行单独的处理。打开乐加固的软件，可以看到，它本身是支持多渠道打包的。我们可以在<code>Android Name</code>一栏写上app定义好的渠道key例如“CHANNEL”,然后<code>配置参数</code>随便写上啥，只要你自己知道这个表示的是应用宝市场就行。</p>
<img src="https://file.2fun.xyz/LEJIAGU20190111112231.png" alt="" />

<p>然后在app的<code>AndroidManifest.xml</code>里面添加应用宝的渠道设置信息：</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-xml">&lt;!--应用宝渠道信息--&gt;
&lt;meta-data
    android:name="CHANNEL"
    android:value="lingsir" /&gt;
</code></pre>

<h3>获取渠道信息</h3>

<pre class="line-numbers prism-highlight" data-start="1"><code class="language-java">/**
     * 获取app渠道（设备来源）
     *
     * @return
     */
    public String getAppSource(Context ctx) &#123;
        String defChannel = "def";
        if (ctx == null) &#123;
            return defChannel;
        &#125;

        String channel = "";

        //从manifest获取,如果manifest设置了值，说明是使用的应用宝多渠道打包，walle不可用
        channel = getMetaData(ctx, "CHANNEL");
        if (!TextUtils.isEmpty(channel) &amp;&amp; !channel.equals("lingsir")) &#123;
            return channel;
        &#125;

        //walle从apk包中获取
        channel = WalleChannelReader.getChannel(ctx, defChannel);
        return channel;
    &#125;

    /**
     * 获取Manifest 里面的meta-data
     *
     * @param context
     * @param key
     * @return
     */
    public static String getMetaData(Context context, String key) &#123;
        ApplicationInfo ai = null;
        try &#123;
            ai = context.getPackageManager().getApplicationInfo(context.getPackageName(),
                    PackageManager.GET_META_DATA);
        &#125; catch (PackageManager.NameNotFoundException e) &#123;
            e.printStackTrace();
            return "";
        &#125;
        Bundle bundle = ai.metaData;
        return bundle.getString(key);
    &#125;
</code></pre>

<p>Walle渠道信息读取类</p>
<pre class="line-numbers prism-highlight" data-start="1"><code class="language-java"><br />public final class WalleChannelReader &#123;
    private WalleChannelReader() &#123;
        super();
    &#125;

    /**
     * get channel
     *
     * @param context context
     * @return channel, null if not fount
     */
    @Nullable
    public static String getChannel(@NonNull final Context context) &#123;
        return getChannel(context, null);
    &#125;

    /**
     * get channel or default
     *
     * @param context context
     * @param defaultChannel default channel
     * @return channel, default if not fount
     */
    @Nullable
    public static String getChannel(@NonNull final Context context, @NonNull final String defaultChannel) &#123;
        final ChannelInfo channelInfo = getChannelInfo(context);
        if (channelInfo == null) &#123;
            return defaultChannel;
        &#125;
        return channelInfo.getChannel();
    &#125;

    /**
     * get channel info (include channle &amp; extraInfo)
     *
     * @param context context
     * @return channel info
     */
    @Nullable
    public static ChannelInfo getChannelInfo(@NonNull final Context context) &#123;
        final String apkPath = getApkPath(context);
        if (TextUtils.isEmpty(apkPath)) &#123;
            return null;
        &#125;
        return ChannelReader.get(new File(apkPath));
    &#125;

    /**
     * get value by key
     *
     * @param context context
     * @param key     the key you store
     * @return value
     */
    @Nullable
    public static String get(@NonNull final Context context, @NonNull final String key) &#123;
        final Map&lt;String, String&gt; channelMap = getChannelInfoMap(context);
        if (channelMap == null) &#123;
            return null;
        &#125;
        return channelMap.get(key);
    &#125;

    /**
     * get all channl info with map
     *
     * @param context context
     * @return map
     */
    @Nullable
    public static Map&lt;String, String&gt; getChannelInfoMap(@NonNull final Context context) &#123;
        final String apkPath = getApkPath(context);
        if (TextUtils.isEmpty(apkPath)) &#123;
            return null;
        &#125;
        return ChannelReader.getMap(new File(apkPath));
    &#125;

    @Nullable
    private static String getApkPath(@NonNull final Context context) &#123;
        String apkPath = null;
        try &#123;
            final ApplicationInfo applicationInfo = context.getApplicationInfo();
            if (applicationInfo == null) &#123;
                return null;
            &#125;
            apkPath = applicationInfo.sourceDir;
        &#125; catch (Throwable e) &#123;
        &#125;
        return apkPath;
    &#125;
&#125;
</code></pre>

<h3>为什么不使用乐加固进行多渠道打包?</h3>

<p>乐加固的多渠道打包时间和美团的walle差别不大，但是乐加固没有提供jar包进行操作，导致无法实现自动化操作，所以我选择了walle。</p>
<h3>运行注意事项：</h3>

<ol>
<li>保证你Android程序的compileSdKVersion 和 buildToosVersion 版本相同</li>
<li>建议将jdk升级到1.8</li>
<li>保证自己本地打包签名可以正常运行</li>
<li>保证配置的相关路径正确，编码格式为UTF-8，不要带异常字符。</li>
<li>Android SDK buidtools请使用25.0+版本，越新越好。</li>
</ol>

<hr />

<h3>参考</h3>

<p><a target="_blank" rel="noopener" href="https://github.com/Jay-Goo/ProtectedApkResignerForWalle"><strong>ProtectedApkResignerForWalle</strong></a></p>
</div></div></article><article class="postlist-item post"><header class="post-header"><h1 class="post-title"><a class="post-title__link" href="/2019/01/01/%E6%88%91%E7%9A%842018%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/">我的2018年终总结</a></h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2019-01-01</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-03-18</span></span></div></header><div class="post-body"><div class="post-excerpt"><p>2018年就这样过去了，也是时候写一篇年终总结了。虽然是这么想着的，但是仍然无法下笔，脑袋乱成一团，索性记录一个流水账。</p>
<h3>一月</h3>

<p>来到新公司三个月刚好转正，最开心的莫过是也给我发了年终奖吧。这个月公司的产品“灵花钱”正式上线，可以让用户在买单的时候享受一定的折扣，感觉是个很朴实的产品，但是有真真切切的带给了用户优惠。公司有位新同事虽是十二月就入职，但是与我同名同姓，也很喜欢“锤子科技”，让我很是惊喜,但是这个同事半年后被离职了。。。<br><img src="https://file.2fun.xyz/61546331613_.pic.jpg" alt="" /></p>
<h3>二月</h3>

<p>二月春节，和梁爽一起回家。在K529的列车上，我们一起聊天，一起看窗外发呆，一起玩Switch。大学时光一直梦想的就是可以一起坐火车回家，现在终于实现了。在外打工是件很辛苦的事情，庆幸有她一路陪伴。年初一，去外公的坟前祭拜，甚至不敢相信外公就这样去世了。但是我们家和外婆家的感情似乎比以前更好了，或许这就是失去了才懂得珍惜。<br><img src="https://file.2fun.xyz/71546332154_.pic.jpg" alt="" /></p>
<h3>三月</h3>

<p>刚回公司，忙着敲代码，公司进行了一次名字变更，虽然我们都不喜欢，但还是给改了，变成了“花生有信”。现在看看这个名字也不是那么的难听，毕竟公司的主营业务不再是水果了，换个名字也可以让公司不那么局限。<br><img src="https://file.2fun.xyz/11546329527_.pic.jpg" alt="" /></p>
<p>这个月抽空把“情侣账单”的小程序版本开发出来了，同时上线了微信小程序平台，可以通过扫码体验：<br><img src="https://file.2fun.xyz//file/2019/01/cc5ec5e7ebf44202ab9a73de3ea99a1f_gh_1ad934cdc059_258.jpg" alt="情侣账单小程序码" /></p>
<h3>四月</h3>

<p>因为之前租的房间不能做饭，所以一直想要一个可以做饭的屋子，便和于冲他们在西湖文化广场合租了一个两室一厅的房子。刚搬进来，看到那些年代感的家具，有一种回家的感觉，不过很快就不这么想了，因为房间太旧了，老是出各种问题。尽管家具装修破旧，但是住在那里还是很自在开心的。<br><img src="https://file.2fun.xyz/31546331064_.pic.jpg" alt="" /></p>
<h3>五月</h3>

<p>很久么有联系的高中同学，来杭州玩，我们一起去吃了火锅，逛西湖。久别重逢，仍有说不完的话题。<br><img src="https://file.2fun.xyz/11546330362_.pic.jpg" alt="" /></p>
<h3>六月</h3>

<p>梁爽一直想去乌镇，本来准备在乌镇戏剧节的时候去，可计划赶不上变化，刚好现在有时间，就定下了去乌镇的票，还特地买了一个拍立得。虽曾是在乌镇呆过一段时间，去了之后才发现对乌镇一点印象也没了，拿着地图一个区域一个区域的逛，饿了就买点小吃，开心就拍拍照。晚上还特自信的告诉她一定要去“似水年华”酒吧，过去发现没有开门，在门口的摇椅上做了一会就走了，后来才知道去错了地方，也是尴尬。<br><img src="https://file.2fun.xyz/21546330578_.pic_hd.jpg" alt="" /></p>
<h3>七月</h3>

<p>来公司有十个月了，一直没有薪水变动，便和龙哥提了加薪的事，龙哥说尽量帮我，不过结果很可惜，被老板否了？但是龙哥承诺年底会给我加薪，这也成了我新的工作动力。</p>
<h3>八月</h3>

<p>八月刚好是爷爷八十大寿的时间，我请了一周的假回重庆拜寿。家里的亲人都从外地回来，周围的街里乡亲前来祝寿，好不热闹！<br><img src="https://file.2fun.xyz/81546333087_.pic.jpg" alt="" /></p>
<h3>九月</h3>

<p>王老师来杭州参加一个活动，至从上次上海一别，如今有一年多的时间了。做为我大学最爱的一名老师，无论如何都是要见一面的。本想是能一起去什么地方逛一下，聊聊天，无奈上班不同上学，最后只能下午两点请了一个假。一起在火车东站等火车的时候见了一面，只请王老师喝了杯茶，吃了点鸡排，心里有些愧疚。他说他在筹备自己的电影，真心希望他的电影大卖！<br><img src="https://file.2fun.xyz/41546331334_.pic.jpg" alt="" /></p>
<h3>十月</h3>

<p>毕业以后，大学同学里除了宇哥、柯阳和韬哥其他就很少联系了。国庆的前两天，博文说想去南京玩，刚好我一个人在杭州也没事，便答应了他一起去南京。南京之旅很有意思，南京的地名也让我大开眼界，感觉像是在游戏世界一般。南京玩的时候刚好遇到了另外一个大学同学吴雅静，之前都是很好的朋友，难的有机会见面，一起去吃了南京的特色肚皮面。<br><img src="https://file.2fun.xyz/51546331431_.pic.jpg" alt="" /><br>去南京的时候刚好遇到”森林音乐节”，认识了一位很酷的歌手——“郭顶”，现在他的《水星记》成为了我的单曲循环必选歌曲。<br><img   src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1548238547&amp;di=e07e8bd2e472bb8524e1a468b94460ad&amp;imgtype=jpg&amp;er=1&amp;src=http%3A%2F%2Fi1.hdslb.com%2Fbfs%2Farchive%2Fab5905dd24ab44eee19c79b5d98645108ce4522c.jpg" style="width: b9999_10000px;"  alt="" /></p>
<h3>十一月</h3>

<p>以前一直想要买一台MacBookPro，看了价格又只能望而却步。那段时间，特别想要做独立游戏玩，想着是时候买一台了，刚好赶上双十一优惠。也是神奇，至从买了电脑之后，游戏就很少玩了，没事就想着写点策划或者代码。梁爽以前一直反对我买，之后只是说我上进了。<br><img src="https://file.2fun.xyz/51546332810_.pic.jpg" alt="" /></p>
<h3>十二月</h3>

<p>龙哥的许诺遥遥无期，在公司的存在感也越来越低。十二月初，想着要不换一家公司，就试着投了几个简历。最后接到了“支付宝”的面试邀请，同时通过了面试。虽然工资很可观，但，思前想后觉得技术支持与我喜欢的工作内容不太匹配，就拒绝了。十二月底，我转岗了Java后端开发，一是因为觉得自己需要学习一些后端的知识，二是因为公司Android开发的需求降低。但是这个过程并不是很顺利，本以为都是使用Java编码理解起来回很容易，结果搭建开发环境就头炸，所以把过程记录下来了，以免日后忘记。<br><img src="https://file.2fun.xyz/screen2019-01-014.44.22.png" alt="" /></p>
<h3>END</h3>

<p>2018年发生了很多事，无论开心还是难过都已成为了过去，新的一年，希望自己可以把年前立的flag<em>开发一款独立游戏</em>做了。之前说过做很多事情，最后都不了了之，今年，<strong>切记一定要坚守计划！</strong></p>
</div></div></article></section><nav class="paginator"><div class="paginator-inner"><a class="extend prev" rel="prev" href="/page/8/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/10/"><i class="fas fa-angle-right"></i></a></div></nav></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><section class="sidebar-toc hide"></section><!-- ov = overview--><section class="sidebar-ov"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/stun-logo.svg" alt="avatar"></div><p class="sidebar-ov-author__text">hello world</p></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">162</div><div class="sidebar-ov-state-item__name">Archives</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Bearever</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.4.0</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>